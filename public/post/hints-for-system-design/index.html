<!DOCTYPE html>
<html lang="en">
    <head>
        

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Hints for System Design</title>
        
        <style>

    html body {
        font-family: 'Inconsolata', sans-serif;
        background-color: white;
    }

    :root {
        --accent: darkgreen;
        --border-width:  5px ;
    }

</style>


<link rel="stylesheet" href="http://lazymonad.com/css/main.css">





<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata">





<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">


<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
 






<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>


<script>$(document).on('click', function() { $('.collapse').collapse('hide'); })</script>
 <meta name="generator" content="Hugo 0.61.0" />
        

        

        
            <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        

        

    </head>

    <body>
        

        <nav class="navbar navbar-default navbar-fixed-top">
            <div class="container">
                <div class="navbar-header">
                    <a class="navbar-brand visible-xs" href="#">Hints for System Design</a>
                    <button class="navbar-toggle" data-target=".navbar-collapse" data-toggle="collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
                <div class="collapse navbar-collapse">
                    
                        <ul class="nav navbar-nav">
                            
                                <li><a href="http://lazymonad.com/post/">Posts</a></li>
                            
                                <li><a href="http://lazymonad.com/tags/">Tags</a></li>
                            
                                <li><a href="http://lazymonad.com/about/">About</a></li>
                            
                        </ul>
                    
                    
                        <ul class="nav navbar-nav navbar-right">
                            
                                <li class="navbar-icon"><a href="mailto:umer@fastmail.com"><i class="fa fa-envelope-o"></i></a></li>
                            
                                <li class="navbar-icon"><a href="https://github.com/umerazad/"><i class="fa fa-github"></i></a></li>
                            
                                <li class="navbar-icon"><a href="https://twitter.com/umerazad/"><i class="fa fa-twitter"></i></a></li>
                            
                                <li class="navbar-icon"><a href="https://www.linkedin.com/in/umerazad/"><i class="fa fa-linkedin"></i></a></li>
                            
                        </ul>
                    
                </div>
            </div>
        </nav>


<main>

    <div>
        <h2>Hints for System Design</h2>
        <h5>April 29, 2012</h5>
        
<a href="http://lazymonad.comtags/recommended-reading"><kbd class="item-tag">Recommended Reading</kbd></a>

<a href="http://lazymonad.comtags/distributed-systems"><kbd class="item-tag">Distributed Systems</kbd></a>

<a href="http://lazymonad.comtags/system-design"><kbd class="item-tag">System Design</kbd></a>

<a href="http://lazymonad.comtags/butler-w.-lampson"><kbd class="item-tag">Butler W. Lampson</kbd></a>


    </div>

    <div align="start" class="content"><p>In 1983, <a href="http://research.microsoft.com/en-us/um/people/blampson/">Butler Lampson</a> published a landmark paper about <a href="http://research.microsoft.com/en-us/um/people/blampson/33-Hints/Acrobat.pdf">Hints of Computer System Design</a>. As a practitioner and a student of distributed systems design, I find it immensely insightful and I habitually go back and re-read this paper every few months. In this post I'll try and summarize some of the learnings from this paper that I've gained over the years.</p>
<!-- raw HTML omitted -->
<h3 id="prerequisite">Prerequisite</h3>
<p><em>Before jumping into system design, think hard about what is it that you are trying to accomplish? Have a clear idea about what your goals are?</em></p>
<!-- raw HTML omitted -->
<h3 id="hints--principles">Hints / Principles</h3>
<p>Butler organizes his suggestions along two axis.</p>
<blockquote>
<ol>
<li><em>Why</em> - Why it helps in making a good system?</li>
<li><em>Where</em> - Where in the system design it helps?</li>
</ol>
</blockquote>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<h3 id="key-takeaways">Key Takeaways</h3>
<ul>
<li>Engineering is all about compromises. You may want your service to be <em>simple, dependable, scalable, efficient, gracefully degradable, fault tolerant and highly responsive</em>. All these are reasonable and very desirable goals but trying to achieve them all at once may not be possible. Choose your battles sensibly. Absence of clearly prioritized goals could lead to the temptation of trying to achieve all at once which most likely will result in a failure. Having said that, sometimes with a lot of effort you may be able to achieve all these goals but it would most definitely be a high cost enterprise.</li>
<li><em>Features, speed, cost, time to market, dependable, usable, adaptable</em> etc. are examples of trade offs. Think which ones matter most for your service?</li>
<li>Write a spec. Writing a spec is difficult because it forces you to think and <em>thinking</em> is hard. For the very least, try and write down about the <em>abstract states</em> and the <em>interfaces</em> that deal with them. Writing gives clarity of mind as Guindon once said &ldquo;writing is nature's way to showing you how fuzzy your thinking is &hellip;&rdquo; <a href="http://dpb.bitbucket.org/leslie-lamport-on-thinking-first-and-on-commenting-code-2007.html">Leslie Lamport</a>.</li>
<li>Keep interfaces simple. An interface should capture the minimum essentials of an abstraction. Don't generalize; generalizations are generally wrong (no pun intended). When an interface undertakes too much, the result is an implementation which is large, slow, and complicated.</li>
<li>Get it right. Neither abstraction nor simplicity is a substitute for getting it right.</li>
<li>Make it fast, rather than general or powerful. It is much better to have basic operations executed quickly than more powerful ones which are slower (of course, a fast, powerful operation is best, if you know how to get it). The trouble with slow, powerful operations is that the client who doesn't want the power pays more for the basic function. Handle normal and worst case separately as a rule, because the requirements for the two are quite different: the normal case must be fast; the worst case must make some progress.</li>
<li>The purpose of abstraction is to conceal undesirable properties; desirable ones should not be hidden.</li>
<li>Use a good idea again, instead of generalizing it. A specialized implementation of the idea may be much more effective than a general one.</li>
<li>Split resources in a fixed way if in doubt, rather than sharing them. It is usually faster to allocate dedicated resources, it is often faster to access them, and the behavior of the allocator is more predictable.</li>
<li>When in doubt, use brute force. Especially as the cost of hardware declines, a straightforward, easily analyzed solution which requires a lot of special-purpose computing cycles is better than a complex, poorly characterized one which may work well if certain assumptions are satisfied. Doing things incrementally almost always costs more [&hellip; and] batch processing permits much simpler error recovery.</li>
<li>Safety first. In allocating resources, strive to avoid disaster, rather than to attain the optimum.</li>
<li>Shed load to control demand, rather than allowing the system to become overloaded. Apply back pressure.</li>
<li>End-to-end error recovery is absolutely necessary for a reliable system, and any other error detection or recovery is not logically necessary, but is strictly for performance. Many uses of hints are applications of this idea. Log updates to record the truth about the state of an object.</li>
<li>Make actions atomic or restartable. Make APIs idempotent.</li>
<li>Try and keep your system simple enough so that you can still understand it. Keeping systems simple is hard and its often not rewarded. Overtime as the system evolves only abstractions and interfaces will save you.</li>
<li>Time to market - keep it real. Learn what customers really want. Make it good enough and then iterate. Ship often and ship early. Good enough is good enough because many errors aren't fetal. For example, at least once guarantee is good enough; trying to provide at-most once guarantee may not be worth the effort.</li>
<li>Many a time approximations are <em>good enough</em>.</li>
<li>Make it efficient by reducing waste. Aim for efficient enough, not optimal. <em>Efficient</em> has two different definitions; one by implementor and other by the client. Understand what is important for your service. In general, optimizations introduce complexity and search for optimality in distributed systems implementation is a bad idea.</li>
<li>Predicting future is hard. Plan for success and change. Successful systems last a long time and eventually have to scale. If you want to plan for success; you better plan for scalability. Embrace uncertainty and develop incrementally.</li>
<li>Failures are inevitable. Embrace them instead of avoiding them. Make failures cheap.</li>
<li>Your system will evolve much more successfully if you design it to be extensible. Internet and HTML are examples of extensible systems. HTML processors drop unrecognized elements which allows for extensibility.</li>
<li>Dependability has three aspects:
<ul>
<li><strong>Reliable</strong> - Gives the right answer.</li>
<li><strong>Available</strong> - Gives the answer promptly.</li>
<li><strong>Secure</strong> - Works in spite of bad guys.</li>
</ul>
</li>
<li>Understand how much dependability is required by your system? In many cases, a dependable <em>undo</em> option would be good enough and you may not need anything else.</li>
<li>Use abstractions and interfaces and limit complexity by liberating parts from each other. Compose relations using indirect mappings. An example would be the network stack: Source route -&gt; IP addr -&gt; DNS name -&gt; Service name  -&gt; Query.</li>
</ul>
</div>

    
    
    
        <h4 class="page-header">Related</h4>
         <div class="item">

    
    
    

    
    

    <h4><a href="http://lazymonad.com/post/garbage-collection-part-2-mark-sweep/">Garbage Collection - Part 2 - Mark Sweep Collection</a></h4>
    <h5>January 1, 2016</h5>
    
<a href="http://lazymonad.comtags/system-design"><kbd class="item-tag">System Design</kbd></a>

<a href="http://lazymonad.comtags/garbage-collection"><kbd class="item-tag">Garbage Collection</kbd></a>

<a href="http://lazymonad.comtags/memory-management"><kbd class="item-tag">Memory Management</kbd></a>

<a href="http://lazymonad.comtags/language-runtimes"><kbd class="item-tag">Language Runtimes</kbd></a>



</div>
  <div class="item">

    
    
    

    
    

    <h4><a href="http://lazymonad.com/post/garbage-collection-part-1/">Garbage Collection - Part 1</a></h4>
    <h5>October 30, 2015</h5>
    
<a href="http://lazymonad.comtags/system-design"><kbd class="item-tag">System Design</kbd></a>

<a href="http://lazymonad.comtags/garbage-collection"><kbd class="item-tag">Garbage Collection</kbd></a>

<a href="http://lazymonad.comtags/memory-management"><kbd class="item-tag">Memory Management</kbd></a>

<a href="http://lazymonad.comtags/language-runtimes"><kbd class="item-tag">Language Runtimes</kbd></a>



</div>
  <div class="item">

    
    
    

    
    

    <h4><a href="http://lazymonad.com/post/are-vmms-making-us-complacent/">Are VMMs making us complacent?</a></h4>
    <h5>April 4, 2015</h5>
    
<a href="http://lazymonad.comtags/rant"><kbd class="item-tag">Rant</kbd></a>

<a href="http://lazymonad.comtags/recommended-reading"><kbd class="item-tag">Recommended Reading</kbd></a>

<a href="http://lazymonad.comtags/operating-systems"><kbd class="item-tag">Operating Systems</kbd></a>

<a href="http://lazymonad.comtags/system-design"><kbd class="item-tag">System Design</kbd></a>

<a href="http://lazymonad.comtags/virtual-machines"><kbd class="item-tag">Virtual Machines</kbd></a>

<a href="http://lazymonad.comtags/microkernels"><kbd class="item-tag">Microkernels</kbd></a>

<a href="http://lazymonad.comtags/vmms"><kbd class="item-tag">VMMs</kbd></a>



</div>
 
    

    
    

</main>

        <footer>
            <p class="copyright text-muted">Â© All rights reserved. Powered by <a href="https://gohugo.io">Hugo</a> and <a href="https://github.com/calintat/minimal">Minimal</a>.</p>
        </footer>

        

        
    </body>

</html>

